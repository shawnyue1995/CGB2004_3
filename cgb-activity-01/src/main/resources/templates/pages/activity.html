<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>Bootstrap 101 Template</title>

    <!-- Bootstrap -->
    <link href="../../static/bootstrap/bootstrap/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>
<div>
    <h2>活动列表页面</h2>
</div>
<div class="container">
    <button class="btn btn-primary" onclick="javascript:location.href='/activity/activity-add.html'"
            type="button">创建活动
    </button>
</div>
<div>
    <table class="table">
        <thead>
        <tr>
            <th><input type="checkbox">全选</th>
            <th>id</th>
            <th>title</th>
            <th>category</th>
            <th>startTime</th>
            <th>endTime</th>
            <th>remark</th>
            <th>state</th>
            <th>createdTime</th>
            <th>createdUser</th>
            <th>状态</th>
        </tr>
        </thead>
        <tbody id="tbodyId">
        <tr>
            <td colspan="6">数据正在加载中....</td>
        </tr>
        </tbody>
    </table>
</div>
<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
<script src="../../static/jquery/jquery/jquery.min.js"></script>
<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
<script src="../../static/bootstrap/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript">
	($function()
	{
		//基于ajax技术向服务端发送异步请求获取数据,然后更新到页面上
		GetActivity();
	}
	)

	function GetActivity() {
		//1.定义url
		var url = "findAll";
		//2.定义请求参数
		//3.发送异步ajax请求,处理响应结果
		//Jquery中Get函数应用
		//向服务端发送Get请求,并将服务端返回Json格式字符串转换为Json格式的js对象
		$.get(url, function (result) {//处理服务端响应的结果
			//获取tbody对象
			var tbody = $("#tbodyId");
            //清空tbody内容
            tbody.empty();
            //迭代result对象,并将result内容追加到tbody中
            result.forEach(item => tbody.append(doCreateRow(item)));
        }, "json")
    }

    function doCreateRow(item) {
		return `<tr>
					<td><input type="checkbox" value="${item.id}"></td>
					<td>${item.title}</td>
					<td>${item.category}</td>
					<td>${item.state}</td>
					<td>${item.startTime}</td>
					<td>${item.endTime}</td>
					<td>${item.remark}</td>
					</tr>`
	}
</script>
</body>
</html>